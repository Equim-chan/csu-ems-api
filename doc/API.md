<!-- 用Markdown Preview渲染时注意：
    * 将title改为"API文档"
    * body的width改为55em
    * 将所有的"user-content-"字符串替换为空
-->

# CSU-EMS API文档 #

版本：2.2.0

- [获取成绩和挂科列表](#获取成绩和挂科列表)
- [获取考试安排表](#获取考试安排表)
- [选某一节课](#选某一节课)
- [获取API文档](#获取api文档)

### 获取成绩和挂科列表 ###
* 路径: `/g` 或 `/grades`
* 方法: `GET`
* 必要参数:

  ```JSON
  {
    "id": "用户名，一般是学号",
    "pwd": "密码"
  }
  ```
* 可选参数:

  ```JavaScript
    // ...
    "sem": "学期，格式为形如'2016-2017-1'的满足正则表达式/^20\d{2}-20\d{2}-[1-2]$/的字符串。如未指定，则会获取所有学期的成绩",
    "details": "如指定，则返回值中会包含各课程的编号、学分、属性、性质等详情"
  }
  ```
* 成功返回:

  ```JavaScript
  {
    "name": "该学生的名字",
    "id":   "用户名",
    "grades": {
      "课程名称": {
        "sem":     "获取该成绩的学期，注意，如果有补考记录，则只会记录成绩最高的那个",
        "reg":     "平时成绩",
        "exam":    "期末成绩",
        "overall": "最终成绩",
        "id":      "只在指定了details时包含。课程编号",
        "attr":    "只在指定了details时包含。课程属性",
        "genre":   "只在指定了details时包含。课程性质",
        "credit":  "只在指定了details时包含。学分"
      },
      // ...
    },
    "subject-count": "有成绩科目的数量",
    "failed": {
      "课程名称": {
        "sem":     "学期，同上",
        "reg":     "平时成绩",
        "exam":    "期末成绩",
        "overall": "最终成绩",
        "id":      "只在指定了details时包含。课程编号",
        "attr":    "只在指定了details时包含。课程属性",
        "genre":   "只在指定了details时包含。课程性质",
        "credit":  "只在指定了details时包含。学分"
      },
      // ...
    },
    "failed-count": "挂科科目的数量"
  }
  ```
* 失败返回:

  ```JavaScript
  {
    "error": "错误原因"
  }
  ```

[↑返回顶端](#csu-ems-api文档)

### 获取考试安排表 ###
* 路径: `/e` 或 `/exams`
* 方法: `GET`
* 必要参数:

  ```JSON
  {
    "id": "用户名，一般是学号",
    "pwd": "密码"
  }
  ```
* 可选参数:

  ```JavaScript
    // ...
    "sem": "学期。如未指定，则会自动获取当前学期"
  }
  ```
* 成功返回:

  ```JavaScript
  {
    "name": "该学生的名字",
    "id":   "用户名",
    "sem":  "学期"
    "exams": {
      "科目名称": {
        "time":     "考试时间",
        "location": "考试地点",
        "seat":     "座位号"
      },
      // ...
    },
    "exams-count": "该学期的考试个数"
  }
  ```

* 失败返回:

  ```JavaScript
  {
    "error": "错误原因"
  }
  ```

[↑返回顶端](#csu-ems-api文档)

### 选某一节课 ###
__尚未实现__

[↑返回顶端](#csu-ems-api文档)

### 获取API文档 ###
* 路径：`/doc`
* 方法：`GET`

[↑返回顶端](#csu-ems-api文档)
